<!doctype html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />
    <meta
      name="description"
      content="Sky Circuits: Chain Core. Joc arcade de sincronitzacio i cadena amb una sola accio, passius automatics i canvi d'ambient cada 50 punts."
    />
    <title>Sky Circuits: Tactical Flap</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bungee&family=Chakra+Petch:wght@500;700&family=Sora:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-orb orb-a" aria-hidden="true"></div>
    <div class="bg-orb orb-b" aria-hidden="true"></div>

    <div class="site-shell">
      <header class="game-header" id="top">
        <div>
          <p class="header-kicker">Arcade tàctic aeri</p>
          <h1>Sky Circuits <span>Tactical Flap</span></h1>
          <p class="header-copy">Partida directa. Una sola accio: sincronitza taps i encadena sectors.</p>
        </div>
        <div class="hero-actions">
          <a href="#play-zone" class="btn btn-primary" id="cta-play">Jugar ara</a>
        </div>
      </header>

      <main class="game-main">
        <section class="play-zone" id="play-zone">
          <div class="play-heading">
            <h2>Partida</h2>
            <p>
              Controles: <strong>Space / Tap</strong> per flap unic, <strong>P</strong> per pausa,
              <strong>R</strong> per reiniciar i <strong>F</strong> per fullscreen.
            </p>
          </div>

          <div
            class="phase-progress"
            role="progressbar"
            aria-label="Progrés d'ambient"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="phase-progress-fill" id="phase-progress-fill"></div>
          </div>
          <p class="phase-progress-label" id="phase-progress-label">Ambient 1 · 50 pts per canvi</p>

          <div class="game-shell">
            <canvas id="game-canvas" aria-label="Sky Circuits game canvas"></canvas>
          </div>

          <div class="status-grid" aria-live="polite">
            <p><span>Mode</span><strong id="mode-value">Menú</strong></p>
            <p><span>Score</span><strong id="score-value">0</strong></p>
            <p><span>Fase</span><strong id="phase-value">1</strong></p>
            <p><span>Ambient</span><strong id="environment-value">Stratos Labs</strong></p>
            <p><span>Progrés</span><strong id="progress-value">0/50</strong></p>
            <p><span>Sync</span><strong id="sync-value">-</strong></p>
            <p><span>Cadena</span><strong id="chain-value">0</strong></p>
            <p><span>Multiplicador</span><strong id="multiplier-value">x1.00</strong></p>
            <p><span>Linked %</span><strong id="linked-value">0%</strong></p>
            <p><span>Passiu</span><strong id="passive-value">-</strong></p>
            <p><span>Runs</span><strong id="runs-value">0</strong></p>
            <p><span>Duració mitjana</span><strong id="avg-duration-value">0.0s</strong></p>
            <p><span>Sync mitjà</span><strong id="avg-sync-value">0%</strong></p>
            <p><span>Cadena mitjana</span><strong id="avg-chain-value">0</strong></p>
            <p><span>Linked mig</span><strong id="avg-linked-value">0%</strong></p>
            <p><span>Clicks CTA</span><strong id="cta-value">0</strong></p>
          </div>

          <div
            class="heat-meter"
            role="meter"
            aria-label="Nivell de calor"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="heat-meter-bar" id="heat-fill"></div>
          </div>
          <p class="assist-hint" id="assist-hint">Pulsa Space o toca el canvas per començar.</p>
        </section>

        <aside class="instruction-panel" aria-label="Instruccions">
          <details class="instruction-details" id="instructions-panel">
            <summary>Veure instruccions</summary>
            <div class="instruction-body">
              <h3>Controls</h3>
              <ul>
                <li>Desktop: Space flap, P pausa, R reset, F fullscreen.</li>
                <li>Mòbil: tap al canvas per flap (1 accio).</li>
              </ul>

              <h3>Com progressa</h3>
              <ul>
                <li>Cada 50 punts canvia l’ambient visual.</li>
                <li>Taps Perfect/Sync mantenen la cadena i pugen multiplicador.</li>
                <li>Offbeat puja el heat i pot trencar sectors.</li>
                <li>Recull aros: son Sync Anchors (bonus i estabilitat temporal).</li>
              </ul>

              <h3>Consell ràpid</h3>
              <p>No facis spam de taps: busca el beat per mantenir la cadena viva.</p>
            </div>
          </details>
        </aside>
      </main>

      <footer class="site-footer">
        <p>Sky Circuits · Tactical Flap</p>
        <a href="#top">Pujar</a>
      </footer>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
